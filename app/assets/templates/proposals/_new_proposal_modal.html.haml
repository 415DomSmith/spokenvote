#newProposalModal
  .modal-header
    .pull-right( class='close' ng-click='$close()' ) &times;
    %h2.modal-title Start New Topic

    .selectedHub
      %span( ng-click='changeHub(true)' href='#' )
        -#.pull-right( tooltip-html-unsafe='{{tooltips.newHub}}' tooltip-placement='left' )
        .groupName( collapse='!sessionSettings.hub_attributes.id' )
          %i( class='glyphicon glyphicon-pencil' )
          %span( tooltip-html-unsafe='{{tooltips.newHub}}' tooltip-placement='left' ) {{ sessionSettings.hub_attributes.group_name }}
        .groupLocation( ng-hide='sessionSettings.hub_attributes.id || !sessionSettings.hub_attributes.location_id' )
          %i( class='glyphicon glyphicon-pencil' )
          %span( tooltip-html-unsafe='{{tooltips.newHub}}' tooltip-placement='left' ) {{ sessionSettings.actions.searchTerm }}
        .groupLocation( collapse='!sessionSettings.hub_attributes.formatted_location' ) {{ sessionSettings.hub_attributes.formatted_location }}

  .modal-body
    #alertContainer
      .modalAlert( alert-bar alertmessageclear='alertService.alertClass' ng-show='alertService.alertDestination=="modal"' )

    %form( name='newProposal.newProposalForm' ng-submit='saveNewProposal()' )
      .newProposal
        .changehub( collapse='!sessionSettings.actions.changeHub' )
          .instructions
            .avatar
              %ng-include( src="'/assets/shared/_currentuser_avatar.html'" )
            %h5 Set the group for your proposal. Start by searching below to see if the group exists yet. If it doesn't, create it.

          .selecthub( ng-controller='DashboardCtrl' role='search' )
            %hidden_field_tag(id='newProposalHub' ui-select2='hubFilterSelect2' ng-model='sessionSettings.actions.newProposalHub')

          .makeHub( ui-if='sessionSettings.actions.changeHub == "new"' )
            %h5.hint-text
            .fa.fa-lightbulb-o
              %span Hint! &nbsp Double-check to make sure your group does not already exist by trying alternate spellings above.
            %h3 Create new group
            .input-area
              %input( name="group_name" id='group_name' type='text' class='input-xlarge'
              placeholder='Enter your new group name' ng-model='sessionSettings.actions.searchTerm' ng-minlength='5'  ng-maxLength='50' )
              .length_counter.happy-text( ng-show='newProposal.newProposalForm.group_name.$valid' ) {{ 50 - sessionSettings.actions.searchTerm.length }} more characters allowed
              .length_counter.error-text( ng-show='newProposal.newProposalForm.group_name.$invalid && !newProposal.newProposalForm.group_name.$error.minlength && !newProposal.newProposalForm.group_name.$error.maxlength' )
                .fa.fa-warning
                %span Required
              .length_counter.error-text( ng-show="newProposal.newProposalForm.group_name.$error.minlength" )
                .fa.fa-warning
                %span Too Short
              .length_counter.error-text( ng-show="newProposal.newProposalForm.group_name.$error.maxlength" )
                .fa.fa-warning
                %spanToo Long

              %input( name="formatted_location" id='hub_formatted_location' type='text' class='input-xlarge'
                placeholder="Enter the Group's Location" ng-model='sessionSettings.hub_attributes.formatted_location' sv-google-place required )
              .length_counter.error-text( ng-hide='newProposal.newProposalForm.formatted_location.$valid' )
                .fa.fa-warning
                %span Choose a valid location from list.
              .length_counter.happy-text( ng-show='newProposal.newProposalForm.formatted_location.$valid && newProposal.newProposalForm.group_name.$valid' )
                %a.link( ng-click='sessionSettings.actions.changeHub = false' href='#' ) Group Location Valid

        .proposal-area( ng-hide='sessionSettings.actions.changeHub' )
          .instructions
            .avatar
              %ng-include( src="'/assets/shared/_currentuser_avatar.html'" )
            %h5 Create your main proposal statement and supporting argument to explain why others should support your proposal.

          .form-group
            %textarea( id='proposal_statement' name='statement' class='full-width' ng-model='newProposal.statement' required ng-minLength='15' ng-maxLength='140'
              placeholder='Write your main proposal statement here.' )
            .length_counter.happy-text( ng-show='newProposal.newProposalForm.statement.$valid' ) {{ 140 - newProposal.statement.length }} characters remaining
            .length_counter.error-text( ng-show='newProposal.newProposalForm.statement.$invalid && !newProposal.newProposalForm.statement.$error.minlength && !newProposal.newProposalForm.statement.$error.maxlength' )
              .fa.fa-warning
              %span Required
            .length_counter.error-text( ng-show="newProposal.newProposalForm.statement.$error.minlength" )
              .fa.fa-warning
              %span Too Short
            .length_counter.error-text( ng-show="newProposal.newProposalForm.statement.$error.maxlength" )
              .fa.fa-warning
              %span Too Long

          .form-group
            %textarea( id='vote_comment' name='comment' class='full-width' ng-model='newProposal.comment' required ng-minLength='7' ng-maxLength='280'
            placeholder='Explain why others should support your proposal here.' )
            .length_counter.happy-text( ng-show='newProposal.newProposalForm.comment.$valid' ) {{ 280 - newProposal.comment.length }} characters remaining
            .length_counter.error-text( ng-show='newProposal.newProposalForm.comment.$invalid && !newProposal.newProposalForm.comment.$error.minlength && !newProposal.newProposalForm.comment.$error.maxlength' )
              .fa.fa-warning
              %span  Required
            .length_counter.error-text( ng-show="newProposal.newProposalForm.comment.$error.minlength" )
              .fa.fa-warning
              %span Too Short
            .length_counter.error-text( ng-show="newProposal.newProposalForm.comment.$error.maxlength" )
              .fa.fa-warning
              %span Too Long

  .modal-footer
    %fieldset
      .control-group
        .controls
          %button( ng-show='sessionSettings.actions.changeHub == false' ng-click='saveNewProposal()' class='btn btn-primary btn-bold' ng-disabled='!newProposal.newProposalForm.$valid' ) Save your New proposal
          %button( ng-show='sessionSettings.actions.changeHub == "new"' ng-disabled='!newProposal.newProposalForm.formatted_location.$valid || !newProposal.newProposalForm.group_name.$valid' ng-click='sessionSettings.actions.changeHub = false' class='btn btn-primary btn-bold' ) Continue
